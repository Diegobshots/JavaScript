<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        /* Explicación de las promesas. Disponible en el estándar de ES6 o ES2015
        Objeto Promise: recibe como parámetros una función con las funciones resolve y reject.
            Resolve: Ejecución satisfactoria de la función.
            Reject: Ejecución con errores de la función.
        */

        function addToArray (data, array) {
            const promise = new Promise(function (resolve, reject) {
            setTimeout(function() {
                array.push(data);
                resolve(array);
            }, 1000);
            
            if (!array) {
                reject(new Error('No existe un array'))
            }
        })
  
        return promise;
        }

        console.log ("Trabajando con promesas");
        const array = [1, 2, 3]
     
        /*Trabajando con las promesas*/
        /* Primera versión */
        console.log ("Primera versión... Con un sólo then");
        addToArray(4, array).then(function () {
            console.log(array);
            console.log("Fin de las promesas");
        })


        /* Segunda versión */
        console.log("Segunda versión... Con más de un then");
        const array2 = [1, 2, 3]
        addToArray(4, array2)
            .then(function() { return addToArray(5, array2) })
            .then(function() { return addToArray(6, array2) })
            .then(function() { return addToArray(7, array2) })
            .then(function () {
                console.log(array2)
        })

        /* Tercera versión con control de errores */
        /*
        console.log("Tercera versión... Con control de errores");
        const arrayErrores = '';
        addToArray(4, array)
            .then(...)
            .then(...)
            .then(...)
            .catch(err => console.log(err.message))
        */

    </script>
</body>
</html>